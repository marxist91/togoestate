{% comment %}  {% extends "base.html" %}{% endcomment %}

{% block content %}

<style>
  :root {
    --primary: #1976D2;
    --secondary: #FF9800;
    --success: #2E7D32;
    --dark: #333;
    --light-bg: #f8f9fa;
    --border: #e0e0e0;
    --shadow: 0 2px 8px rgba(0,0,0,0.1);
    --shadow-lg: 0 4px 20px rgba(0,0,0,0.15);
  }

  * {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    color: #333;
    line-height: 1.6;
    background: #f8f9fa;
  }

  /* NAVBAR */
  .navbar {
    background: linear-gradient(135deg, var(--primary) 0%, #1565C0 100%);
    color: white;
    padding: 1rem 1.5rem;
    box-shadow: var(--shadow);
    position: sticky;
    top: 0;
    z-index: 1000;
  }

  .navbar-container {
    max-width: 1400px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 2rem;
  }

  .navbar-brand {
    font-size: 1.5rem;
    font-weight: 700;
    color: white;
    text-decoration: none;
    letter-spacing: -0.5px;
    flex-shrink: 0;
  }

  .navbar-nav {
    display: flex;
    gap: 2rem;
    align-items: center;
    flex: 1;
    justify-content: center;
  }

  .navbar-nav a {
    color: white;
    text-decoration: none;
    font-weight: 500;
    transition: opacity 0.3s;
    white-space: nowrap;
  }

  .navbar-nav a:hover {
    opacity: 0.8;
  }

  /* ANNONCES DROPDOWN */
  .annonces-dropdown {
    position: relative;
    display: inline-block;
  }

  .annonces-toggle {
    color: white;
    text-decoration: none;
    font-weight: 500;
    cursor: pointer;
    transition: opacity 0.3s;
  }

  .annonces-toggle:hover {
    opacity: 0.8;
  }

  .annonces-menu {
    position: absolute;
    top: 100%;
    left: 0;
    background: white;
    min-width: 150px;
    border-radius: 8px;
    box-shadow: var(--shadow-lg);
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px);
    transition: all 0.3s ease;
    z-index: 1001;
    margin-top: 0.5rem;
  }

  .annonces-dropdown:hover .annonces-menu {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }

  .annonces-menu a {
    display: block;
    padding: 0.75rem 1rem;
    color: var(--dark);
    text-decoration: none;
    border-bottom: 1px solid var(--border);
    transition: background 0.2s;
  }

  .annonces-menu a:hover {
    background: #f8f9fa;
  }

  .annonces-menu a:last-child {
    border-bottom: none;
  }

  .navbar-actions {
    display: flex;
    gap: 1rem;
    align-items: center;
    flex-shrink: 0;
  }

  .btn-primary {
    padding: 0.6rem 1.5rem;
    background: var(--secondary);
    color: white;
    border-radius: 6px;
    text-decoration: none;
    font-weight: 600;
    transition: transform 0.2s, box-shadow 0.2s;
    display: inline-block;
    white-space: nowrap;
  }

  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(255, 152, 0, 0.4);
  }

  /* CONTAINER */
  .container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 1.5rem;
  }

  /* HERO SECTION */
  .hero {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 3rem 1.5rem;
    margin-bottom: 2rem;
    border-radius: 16px;
    box-shadow: var(--shadow-lg);
  }

  .hero h1 {
    margin: 0 0 0.5rem 0;
    font-size: 2.5rem;
    font-weight: 700;
  }

  .hero-subtitle {
    margin: 0 0 2rem 0;
    font-size: 1.2rem;
    opacity: 0.95;
  }

  .search-form {
    display: flex;
    gap: 0.8rem;
    flex-wrap: wrap;
    background: white;
    padding: 1.5rem;
    border-radius: 12px;
    box-shadow: var(--shadow);
  }

  .search-form select,
  .search-form input {
    padding: 0.7rem;
    border: 1px solid var(--border);
    border-radius: 6px;
    font-size: 0.95rem;
    flex: 1;
    min-width: 150px;
  }

  .search-form select:focus,
  .search-form input:focus {
    outline: none;
    border-color: var(--primary);
  }

  .btn-search {
    padding: 0.7rem 1.5rem;
    background: var(--primary);
    color: white;
    border: none;
    border-radius: 6px;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.3s;
  }

  .btn-search:hover {
    background: #1565C0;
  }

  .search-stats {
    margin-top: 1rem;
    font-size: 0.95rem;
    color: white;
    opacity: 0.9;
  }

  /* SECTIONS */
  .section {
    margin-bottom: 3rem;
  }

  .section-title {
    font-size: 1.8rem;
    font-weight: 700;
    margin: 0 0 1.5rem 0;
    color: var(--dark);
  }

  /* REGIONS GRID */
  .regions-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 1rem;
  }

  .region-card {
    display: block;
    padding: 1.5rem;
    background: white;
    border: 2px solid var(--border);
    border-radius: 12px;
    text-decoration: none;
    color: var(--dark);
    transition: all 0.3s;
    box-shadow: var(--shadow);
  }

  .region-card:hover {
    border-color: var(--primary);
    transform: translateY(-4px);
    box-shadow: var(--shadow-lg);
  }

  .region-name {
    font-weight: 700;
    font-size: 1.1rem;
    margin-bottom: 0.5rem;
  }

  .region-link {
    color: var(--primary);
    font-size: 0.9rem;
  }

  /* LISTINGS GRID */
  .listings-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1.5rem;
  }

  .listing-card {
    background: white;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: var(--shadow);
    transition: all 0.3s;
  }

  .listing-card:hover {
    transform: translateY(-8px);
    box-shadow: var(--shadow-lg);
  }

  .listing-image {
    width: 100%;
    height: 200px;
    object-fit: cover;
  }

  .listing-no-image {
    width: 100%;
    height: 200px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.1rem;
  }

  .listing-body {
    padding: 1.2rem;
  }

  .listing-title {
    font-size: 1.2rem;
    font-weight: 700;
    margin: 0 0 0.5rem 0;
    color: var(--dark);
  }

  .listing-price {
    font-size: 1.3rem;
    font-weight: 700;
    color: var(--success);
    margin: 0.5rem 0;
  }

  .listing-meta {
    display: flex;
    gap: 0.5rem;
    color: #666;
    font-size: 0.9rem;
    margin: 0.5rem 0;
  }

  .listing-category {
    color: #888;
    font-size: 0.9rem;
  }

  .btn-details {
    display: inline-block;
    margin-top: 0.8rem;
    padding: 0.6rem 1.2rem;
    background: var(--primary);
    color: white;
    border-radius: 6px;
    text-decoration: none;
    font-weight: 600;
    transition: all 0.3s;
  }

  .btn-details:hover {
    background: #1565C0;
    transform: translateX(4px);
  }

  /* FEATURED BADGE */
  .featured-badge {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: var(--secondary);
    color: white;
    padding: 0.4rem 0.8rem;
    border-radius: 6px;
    font-size: 0.8rem;
    font-weight: 600;
  }

  .listing-card {
    position: relative;
  }

  /* PAGINATION */
  .pagination {
    margin-top: 2rem;
    display: flex;
    gap: 0.5rem;
    justify-content: center;
    align-items: center;
  }

  .pagination a,
  .pagination span {
    padding: 0.6rem 1rem;
    border: 1px solid var(--border);
    border-radius: 6px;
    text-decoration: none;
    color: var(--dark);
    transition: all 0.3s;
  }

  .pagination a:hover {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
  }

  /* INFO BOXES */
  .info-boxes {
    display: grid;
    grid-template-columns: 1.4fr 1fr;
    gap: 1.5rem;
    margin-top: 3rem;
  }

  .info-box {
    background: white;
    border-radius: 12px;
    padding: 2rem;
    box-shadow: var(--shadow);
  }

  .info-box h3 {
    margin: 0 0 1rem 0;
    font-size: 1.4rem;
    color: var(--dark);
  }

  .info-box ul {
    margin: 0;
    padding-left: 1.5rem;
    line-height: 1.8;
  }

  .info-box ul li {
    margin-bottom: 0.5rem;
  }

  .newsletter-form input {
    width: 100%;
    padding: 0.7rem;
    margin-bottom: 0.8rem;
    border: 1px solid var(--border);
    border-radius: 6px;
    font-size: 0.95rem;
  }

  .newsletter-form input:focus {
    outline: none;
    border-color: var(--primary);
  }

  .btn-subscribe {
    width: 100%;
    padding: 0.8rem;
    background: var(--success);
    color: white;
    border: none;
    border-radius: 6px;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.3s;
  }

  .btn-subscribe:hover {
    background: #1B5E20;
  }

  /* USER DROPDOWN */
  .user-dropdown {
    position: relative;
    display: inline-block;
  }

  .user-dropdown-toggle {
    color: white;
    text-decoration: none;
    font-weight: 500;
    cursor: pointer;
    transition: opacity 0.3s;
  }

  .user-dropdown-toggle:hover {
    opacity: 0.8;
  }

  .user-dropdown-menu {
    position: absolute;
    top: 100%;
    right: 0;
    background: white;
    min-width: 200px;
    border-radius: 8px;
    box-shadow: var(--shadow-lg);
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px);
    transition: all 0.3s ease;
    z-index: 1001;
    margin-top: 0.5rem;
  }

  .user-dropdown:hover .user-dropdown-menu {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }

  .user-dropdown-menu a {
    display: block;
    padding: 0.75rem 1rem;
    color: var(--dark);
    text-decoration: none;
    border-bottom: 1px solid var(--border);
    transition: background 0.2s;
  }

  .user-dropdown-menu a:hover {
    background: #f8f9fa;
  }

  .user-dropdown-menu a:last-child {
    border-bottom: none;
  }

  .user-dropdown-menu .logout-link {
    color: #dc3545;
    font-weight: 600;
  }

  .user-dropdown-menu .logout-link:hover {
    background: #ffeaea;
  }

  /* MOBILE DROPDOWN */
  @media (max-width: 768px) {
    .user-dropdown-menu {
      display: none;
    }

    .user-dropdown.active .user-dropdown-menu {
      display: block;
      position: static;
      box-shadow: none;
      background: rgba(255, 255, 255, 0.95);
      margin-top: 0.5rem;
      border-radius: 8px;
    }
  }

  /* FOOTER */
  .footer {
    background: var(--dark);
    color: white;
    margin-top: 4rem;
  }

  .footer-cta {
    background: linear-gradient(135deg, var(--primary) 0%, #1565C0 100%);
    padding: 3rem 1.5rem;
    text-align: center;
  }

  .footer-cta h3 {
    font-size: 1.8rem;
    margin: 0 0 0.5rem 0;
  }

  .footer-cta p {
    margin: 0 0 1.5rem 0;
    font-size: 1.1rem;
    opacity: 0.95;
  }

  .footer-main {
    max-width: 1400px;
    margin: 0 auto;
    padding: 3rem 1.5rem;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 3rem;
  }

  .footer-section h4 {
    font-size: 1.2rem;
    margin-bottom: 1rem;
  }

  .footer-links {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .footer-links li {
    margin-bottom: 0.5rem;
  }

  .footer-links a {
    color: white;
    text-decoration: none;
    transition: color 0.3s;
  }

  .footer-links a:hover {
    color: var(--secondary);
  }

  .social-links {
    display: flex;
    gap: 1rem;
  }

  .social-links a {
    color: white;
    text-decoration: none;
    transition: color 0.3s;
  }

  .social-links a:hover {
    color: var(--secondary);
  }

  @media (max-width: 1024px) {
    .info-boxes {
      grid-template-columns: 1fr;
    }
  }

  @media (max-width: 768px) {
    .navbar-container {
      flex-direction: column;
      gap: 1rem;
    }

    .navbar-nav {
      gap: 1rem;
      flex-wrap: wrap;
      justify-content: center;
    }

    .navbar-actions {
      flex-direction: column;
      width: 100%;
    }

    .hero h1 {
      font-size: 1.8rem;
    }

    .listings-grid {
      grid-template-columns: 1fr;
    }

    .search-form {
      flex-direction: column;
    }

    .search-form select,
    .search-form input {
      width: 100%;
    }
  }
</style>

<!-- NAVBAR -->
<header class="navbar">
  <div class="navbar-container">
    <a href="/" class="navbar-brand">TogoEstate</a>
    <nav class="navbar-nav">
      <a href="{% url 'listing_list' %}">Accueil</a>
      <div class="annonces-dropdown">
        <a href="#" class="annonces-toggle">Annonces</a>
        <div class="annonces-menu">
          <a href="{% url 'listing_list' %}?listing_type=rent">√Ä louer</a>
          <a href="{% url 'listing_list' %}?listing_type=sale">√Ä vendre</a>
        </div>
      </div>
      <a href="{% url 'agency_list' %}">Agences</a>
      <a href="{% url 'about' %}">√Ä propos</a>
      <a href="{% url 'contact' %}">Contact</a>
    </nav>
    <div class="navbar-actions">
      {% if user.is_authenticated %}
        <div class="user-dropdown">
          <a href="{% url 'dashboard' %}" class="user-dropdown-toggle" style="font-size:0.9rem;">Bonjour, {{ user.username }}</a>
          <div class="user-dropdown-menu">
            {% if user.is_customer %}
              <a href="{% url 'dashboard' %}">üìä Dashboard</a>
              <a href="/favorites/">‚ù§Ô∏è Favoris</a>
              <a href="{% url 'appointments_list' %}">üìÖ Rendez-vous</a>
              <a href="/accounts/profile/">üë§ Profil</a>
            {% elif user.is_agent %}
              <a href="{% url 'dashboard' %}">üìä Dashboard</a>
              <a href="{% url 'manage_listings' %}">üè† Mes annonces</a>
              <a href="{% url 'appointments_list' %}">üìÖ Rendez-vous</a>
              {% if user.agency %}
                <a href="{% url 'agency_statistics' user.agency.id %}">üìà Stats agence</a>
              {% endif %}
            {% elif user.is_agency_admin %}
              <a href="{% url 'dashboard' %}">üìä Dashboard</a>
              {% if user.agency %}
                <a href="{% url 'agency_agents' user.agency.id %}">üë• G√©rer agents</a>
                <a href="{% url 'agency_statistics' user.agency.id %}">üìà Stats agence</a>
              {% endif %}
              <a href="{% url 'listing_list' %}">üè† Annonces</a>
            {% elif user.is_platform_admin %}
              <a href="{% url 'dashboard' %}">üìä Dashboard</a>
              <a href="{% url 'agency_list' %}">üè¢ G√©rer agences</a>
              <a href="/admin/audit_report/">üìã Rapport audit</a>
              <a href="/admin/">‚öôÔ∏è Admin panel</a>
            {% endif %}
            <a href="{% url 'logout' %}" class="logout-link">üö™ D√©connexion</a>
          </div>
        </div>
      {% else %}
        <a href="{% url 'login' %}" style="color:#fff; text-decoration:none;">Se connecter</a>
      {% endif %}
      <a href="{% url 'listing_create' %}" class="btn-primary">
        + Publier une annonce
      </a>
    </div>
  </div>
</header>

<!-- HERO SECTION -->
<div class="container">
  <section class="hero">
    <h1>Trouvez votre prochain bien au Togo</h1>
    <p class="hero-subtitle">Location ‚Ä¢ Vente ‚Ä¢ R√©sidentiel ‚Ä¢ Commercial</p>

    <!-- Search Form -->
    <form method="get" class="search-form">
      <select name="city">
        <option value="">Toutes les villes</option>
        {% for c in cities %}
          <option value="{{ c.id }}" {% if filters.city == c.id|stringformat:"s" %}selected{% endif %}>
            {{ c.name }}
          </option>
        {% endfor %}
      </select>

      <select name="category">
        <option value="">Toutes les cat√©gories</option>
        {% for cat_value, cat_label in categories %}
          <option value="{{ cat_value }}" {% if filters.category == cat_value %}selected{% endif %}>
            {{ cat_label }}
          </option>
        {% endfor %}
      </select>

      <select name="listing_type">
        <option value="">Tous les types</option>
        {% for type_value, type_label in types %}
          <option value="{{ type_value }}" {% if filters.listing_type == type_value %}selected{% endif %}>{{ type_label }}</option>
        {% endfor %}
      </select>

      <input type="number" name="min_price" placeholder="Prix min" value="{{ filters.min_price }}">
      <input type="number" name="max_price" placeholder="Prix max" value="{{ filters.max_price }}">

      <button type="submit" class="btn-search">üîç Rechercher</button>
    </form>

    <div class="search-stats">
      üìä {{ stats.total }} annonces publi√©es
    </div>
  </section>

  <!-- REGIONS -->
  <section class="section">
    <h2 class="section-title">Explorer par r√©gion</h2>
    <div class="regions-grid">
      {% for r in regions %}
        <a href="{% url 'region_listings' r.slug %}" class="region-card">
          <div class="region-name">{{ r.name }}</div>
          <div class="region-link">Voir les annonces ‚Üí</div>
        </a>
      {% endfor %}
    </div>
  </section>

  <!-- FEATURED LISTINGS -->
  {% if featured %}
  <section class="section">
    <h2 class="section-title">‚≠ê Annonces en vedette</h2>
    <div class="listings-grid">
      {% for listing in featured %}
        <div class="listing-card">
          <span class="featured-badge">‚≠ê Vedette</span>
          {% if listing.cover %}
            <img src="{{ listing.cover.image.url }}" alt="{{ listing.title }}" class="listing-image">
          {% else %}
            <div class="listing-no-image">üì∑ Pas d'image</div>
          {% endif %}
          <div class="listing-body">
            <h3 class="listing-title">{{ listing.title }}</h3>
            <p class="listing-price">{{ listing.price }} {{ listing.currency }}</p>
            <div class="listing-meta">
              <span>üìç {{ listing.city }}</span>
            </div>
            <p class="listing-category">{{ listing.category }}</p>
            <a href="{% url 'listing_detail' listing.slug %}" class="btn-details">Voir d√©tails ‚Üí</a>
          </div>
        </div>
      {% endfor %}
    </div>
  </section>
  {% endif %}

  <!-- ALL LISTINGS -->
  <section class="section">
    <h2 class="section-title">Toutes les annonces</h2>

    {% if page_obj %}
      <div class="listings-grid">
        {% for listing in page_obj %}
          <div class="listing-card">
            {% if listing.photos.exists %}
              {% if listing.cover %}
                <div style="position: relative;">
                  <img src="{{ listing.cover.image.url }}" alt="{{ listing.title }}" class="listing-image">
                  {% if user.is_authenticated %}
                    <button class="favorite-btn" data-listing-id="{{ listing.id }}" style="position: absolute; top: 10px; left: 10px; background: rgba(255,255,255,0.8); border: none; border-radius: 50%; width: 40px; height: 40px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 18px;">
                      ‚ù§Ô∏è
                    </button>
                  {% endif %}
                </div>
              {% else %}
                <div style="position: relative;">
                  <img src="{{ listing.photos.first.image.url }}" alt="{{ listing.title }}" class="listing-image">
                  {% if user.is_authenticated %}
                    <button class="favorite-btn" data-listing-id="{{ listing.id }}" style="position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.8); border: none; border-radius: 50%; width: 40px; height: 40px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 18px;">
                      ‚ù§Ô∏è
                    </button>
                  {% endif %}
                </div>
              {% endif %}
            {% else %}
              <div class="listing-no-image" style="position: relative;">
                üì∑ Pas d'image
                {% if user.is_authenticated %}
                  <button class="favorite-btn" data-listing-id="{{ listing.id }}" style="position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.8); border: none; border-radius: 50%; width: 40px; height: 40px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 18px;">
                    ‚ù§Ô∏è
                  </button>
                {% endif %}
              </div>
            {% endif %}

            <div class="listing-body">
              <h3 class="listing-title">{{ listing.title }}</h3>
              <p class="listing-price">{{ listing.price }} {{ listing.currency }}</p>
              <div class="listing-meta">
                <span>üìç {{ listing.city }}</span>
              </div>
              <p class="listing-category">{{ listing.category }}</p>
              <a href="{% url 'listing_detail' listing.slug %}" class="btn-details">Voir d√©tails ‚Üí</a>
            </div>
          </div>
        {% endfor %}
      </div>

      <!-- Pagination -->
      <div class="pagination">
        {% if page_obj.has_previous %}
          <a href="?page={{ page_obj.previous_page_number }}&city={{ filters.city }}&category={{ filters.category }}&listing_type={{ filters.listing_type }}&min_price={{ filters.min_price }}&max_price={{ filters.max_price }}">‚Üê Pr√©c√©dent</a>
        {% endif %}
        <span>Page {{ page_obj.number }} / {{ page_obj.paginator.num_pages }}</span>
        {% if page_obj.has_next %}
          <a href="?page={{ page_obj.next_page_number }}&city={{ filters.city }}&category={{ filters.category }}&listing_type={{ filters.listing_type }}&min_price={{ filters.min_price }}&max_price={{ filters.max_price }}">Suivant ‚Üí</a>
        {% endif %}
      </div>
    {% else %}
      <p style="text-align:center; padding:2rem; color:#666;">Aucune annonce trouv√©e avec ces filtres.</p>
    {% endif %}
  </section>

  <!-- INFO BOXES -->
  <section class="info-boxes">
    <div class="info-box">
      <h3>üèÜ Pourquoi TogoEstate</h3>
      <ul>
        <li><strong>Mandats v√©rifi√©s:</strong> propri√©t√©s valid√©es par nos √©quipes.</li>
        <li><strong>Support local:</strong> assistance bas√©e au Togo.</li>
        <li><strong>Agents certifi√©s:</strong> partenaires professionnels.</li>
      </ul>
    </div>
    <div class="info-box">
      <h3>üì¨ Newsletter</h3>
      <p style="color:#666; margin-bottom:1rem;">Recevez les nouvelles annonces chaque semaine dans votre bo√Æte mail.</p>
      <form method="post" action="#" class="newsletter-form">
        {% csrf_token %}
        <input type="email" name="email" placeholder="Votre email" required>
        <button type="submit" class="btn-subscribe">S'abonner</button>
      </form>
    </div>
  </section>
</div>

<!-- FOOTER -->
<footer class="footer">
  <!-- CTA -->
  <div class="footer-cta">
    <h3>Vous souhaitez devenir agent immobilier ?</h3>
    <p>Inscrivez-vous aujourd'hui et rejoignez notre r√©seau de professionnels certifi√©s.</p>
    <a href="#" class="btn-primary">S'inscrire maintenant</a>
  </div>

  <!-- MAIN FOOTER -->
  <div class="footer-main">
    <div class="footer-section">
      <h4>TogoEstate</h4>
      <p>Lom√©, Maritime, Togo</p>
      <p>¬© 2025 TogoEstate.<br>Tous droits r√©serv√©s.</p>
    </div>

    <div class="footer-section">
      <h4>Liens rapides</h4>
      <ul class="footer-links">
        <li><a href="{% url 'about' %}">√Ä propos</a></li>
        <li><a href="{% url 'contact' %}">Contact</a></li>
        <li><a href="#">Aide</a></li>
        <li><a href="#">Mentions l√©gales</a></li>
        <li><a href="#">Confidentialit√©</a></li>
      </ul>
    </div>

    <div class="footer-section">
      <h4>Suivez-nous</h4>
      <div class="social-links">
        <a href="#">Facebook</a>
        <a href="#">Instagram</a>
        <a href="#">LinkedIn</a>
      </div>
    </div>
  </div>
</footer>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const favoriteButtons = document.querySelectorAll('.favorite-btn');
    favoriteButtons.forEach(button => {
        button.addEventListener('click', function(e) {
            e.preventDefault();
            const listingId = this.getAttribute('data-listing-id');
            const csrfToken = document.querySelector('[name=csrfmiddlewaretoken]').value;

            fetch(`/favorites/toggle/${listingId}/`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRFToken': csrfToken
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Toggle the heart icon
                    this.innerHTML = data.is_favorite ? 'üíñ' : '‚ù§Ô∏è';
                } else {
                    alert('Erreur lors de la mise √† jour des favoris.');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Erreur lors de la mise √† jour des favoris.');
            });
        });
    });

    // Mobile dropdown toggle
    const userDropdown = document.querySelector('.user-dropdown');
    if (userDropdown) {
        userDropdown.addEventListener('click', function(e) {
            if (window.innerWidth <= 768) {
                e.preventDefault();
                this.classList.toggle('active');
            }
        });
    }
});
</script>

{% endblock %}
